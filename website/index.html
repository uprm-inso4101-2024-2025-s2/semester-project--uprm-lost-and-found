<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>UPRM Lost and Found</title>
  <link rel="stylesheet" href="cssfiles/styles.css">
</head>
<body>
  <div class="wrapper">
    <header>
      <h1>UPRM Lost and Found</h1>
      <nav>
        <ul>
          <li><a href="report-type.html">Make Report</a></li>
          <li><a href="my_cases.html">Your Cases</a></li>
          <li><a href="#">Our Location</a></li>
          <li><a href="#">Contact Us</a></li>
          <li><a href="signup.html">Sign Up</a></li>
          <li><a href="login.html">Log In</a></li>
        </ul>
      </nav>
    </header>
    
    <main>
      <!-- About Us and Our Mission Sections -->
      <section id="about-mission">
        <div id="about" class="block">
          <h2>About Us</h2>
          <p>Welcome to the UPRM Lost and Found, a student-driven initiative designed to help our campus community reunite with lost items. Created by students for students, our platform provides a simple and efficient way to report lost or found items on campus. Whether you've misplaced your keys, found a forgotten backpack, or are searching for a lost phone, our website is here to help. Together, we can make our campus a more connected and caring place by ensuring lost goods find their way back to their rightful owners.</p>
        </div>
        <div id="mission" class="block">
          <h2>Our Mission</h2>
          <p>At UPRM Lost and Found, our mission is to foster a sense of community and responsibility among students by providing a reliable and user-friendly platform for reporting and claiming lost items. We aim to reduce the stress and inconvenience of losing personal belongings by creating a centralized system where students can easily connect with those who have found their items. Through this initiative, we strive to promote honesty, cooperation, and mutual support within our campus community, ensuring that lost goods are returned to their rightful owners as quickly and efficiently as possible.</p>
        </div>
      </section>
      
      <!-- Recently Lost Section -->
      <section id="recently-lost">
        <h2>Recently Lost</h2>
        <div class="photo-grid" id="lost-items-container">
          <!-- Dynamic lost items will load here -->
        </div>
      </section>
    </main>
    
    <footer>
      <div class="footer-columns">
        <div class="footer-column">
          <h3>Contact Us</h3>
          <p>Email: <a href="mailto:lostandfound@upr.edu">lostandfound@upr.edu</a></p>
          <p>Phone: +1 (787) 123-4567</p>
        </div>
        <div class="footer-column">
          <h3>Follow Us</h3>
          <p><a href="https://twitter.com/uprmlostfound" target="_blank">Twitter</a></p>
          <p><a href="https://instagram.com/uprmlostfound" target="_blank">Instagram</a></p>
        </div>
        <div class="footer-column">
          <h3>Location</h3>
          <p>University of Puerto Rico, Mayagüez</p>
          <p>Student Center, Room 101</p>
          <p>Mayagüez, PR 00681</p>
        </div>
      </div>
      <p class="footer-copyright">
        &copy; 2025 UPRM Lost and Found. All rights reserved.
      </p>
    </footer>
  </div>

  <!-- MODAL FOR ITEM DETAILS -->
  <div id="itemModal" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center hidden z-50">
    <div class="bg-white rounded-lg shadow-lg p-6 w-11/12 max-w-md relative">
      <button id="closeModal" class="absolute top-2 right-3 text-gray-500 hover:text-red-500 text-xl">&times;</button>
      <h3 id="modalTitle" class="text-lg font-bold mb-2">Item Title</h3>
      <img id="modalImage" src="" alt="Item Image" class="w-full h-48 object-cover mb-4 rounded">
      <p id="modalInfo" class="text-sm text-gray-700 mb-2"></p>
      <p id="modalDate" class="text-xs text-gray-500 mb-4"></p>
      <button id="claimBtn" class="bg-green-600 text-white px-4 py-2 rounded hover:bg-green-700">Claim Item</button>
    </div>
  </div>

  <script>
    window.addEventListener("DOMContentLoaded", () => {
      fetch("http://localhost:8000/api/lost-items/")
        .then(res => res.json())
        .then(items => {
          const container = document.getElementById("lost-items-container");
          container.innerHTML = "";

          items.forEach(item => {
            const div = document.createElement("div");
            div.className = "photo-item";

            const image = document.createElement("img");
            image.src = item.photo_urls[0] || "images/placeholder.jpg";
            image.alt = "Lost Item";

            const desc = document.createElement("p");
            desc.textContent = item.description;

            const btn = document.createElement("button");
            btn.textContent = "View Details";
            btn.className = "mt-2 px-3 py-1 bg-green-600 text-white text-sm rounded hover:bg-green-700";
            btn.onclick = () => showModal(item);

            div.appendChild(image);
            div.appendChild(desc);
            div.appendChild(btn);
            container.appendChild(div);
          });
        })
        .catch(err => {
          console.error("Error fetching lost items:", err);
          document.getElementById("lost-items-container").innerHTML =
            "<p style='color:red;'>Error loading lost items. Please try again later.</p>";
        });
    });

    function showModal(item) {
      document.getElementById("modalTitle").textContent = item.description;
      document.getElementById("modalImage").src = item.photo_urls[0] || "images/placeholder.jpg";
      document.getElementById("modalInfo").textContent = "Details: " + (item.information || "No additional info.");
      document.getElementById("modalDate").textContent = "Published: " + item.publish_date;
      document.getElementById("itemModal").classList.remove("hidden");

      document.getElementById("claimBtn").onclick = () => {
        alert("Thanks! We'll review your claim and get back to you.");
        document.getElementById("itemModal").classList.add("hidden");
      };
    }

    document.getElementById("closeModal").addEventListener("click", () => {
      document.getElementById("itemModal").classList.add("hidden");
    });
  </script>
</body>
</html>
